<html>
<head>
<script
  src="https://code.jquery.com/jquery-3.6.4.min.js"
  integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
  crossorigin="anonymous"></script>

<style>

label { content: ''; background-image: url(tiles.png); min-width: 7px; min-height: 42px; }

:root {
    --door-offset: -78px;
    --window-offset: -47px;
    --front-offset: -103px;
    --extra-offset: -110px;
}

.h0 { background-position: var(--front-offset) 0; width: 7px; }
.h1 { background-position: var(--front-offset) -42px; width: 7px; }

.t0 { background-position: 0 0; width: 7px; }
.t1 { background-position: -8px 0; width: 20px; }

.d0 { background-position: var(--door-offset) 0; width: 16px; }
.d1 { background-position: var(--door-offset) -42px; width: 16px; }
.d2 { background-position: var(--door-offset) -84px; width: 16px; }
.d3 { background-position: var(--door-offset) -126px; width: 16px; }
.d4 { background-position: var(--door-offset) -168px; width: 22px; }
.d5 { background-position: var(--door-offset) -210px; width: 22px; }
.d6 { background-position: var(--door-offset) -252px; width: 24px; }

.w0 { background-position: var(--window-offset) 0; width: 25px; }
.w1 { background-position: var(--window-offset) -42px; width: 25px; }
.w2 { background-position: var(--window-offset) -84px; width: 25px; }
.w3 { background-position: var(--window-offset) -126px; width: 14px; }
.w4 { background-position: var(--window-offset) -168px; width: 14px; }
.w5 { background-position: var(--window-offset) -210px; width: 14px; }
.w6 { background-position: var(--window-offset) -252px; width: 7px; }
.w7 { background-position: var(--window-offset) -294px; width: 30px; }
.w8 { background-position: var(--window-offset) -336px; width: 30px; }

.spot { background-position: var(--extra-offset) -84px; width: 22px; }
.blank { background-position: var(--extra-offset) -126px; width: 22px; }

input { position: absolute; left: -999px; }
input + label { display: none; }
input:checked + label { display: inline-block; }

.picker { display: inline-block; }
.picker:hover > span > input + label { display: block; }
.picker:hover {
    position: absolute;
    white-space: nowrap;
    z-index: 998;
}
.picker:hover .picker:hover { z-index: 999; }
.picker:hover .picker:hover > input + label { display: inline-block; }
.picker:hover > span > input + label:hover { background-color: white; cursor: pointer; }
.picker:hover input:checked + label { border: 1px solid red; background-color: white; }

.layer1.picker br { display: none; }
.layer1.picker:hover br { display: initial; }

.layer1.picker:hover {
    border: 1px solid gray;
    border-radius: 7px;
    padding: 1px;
    background-color: silver;
    opacity: 0.8;
}

.layer1.picker:hover > span > input + label { display: inline-block; margin: 1px; }
</style>
<script>
$(function() {
    function option$(id, groupName, checked) {
        return $('<span/>').html([
            $('<input/>', {'type': 'radio', value: id, id: groupName + id, checked: checked, name: groupName}),
            $('<label/>', {'for': groupName + id, 'class': id, title: id}).html('&nbsp;')
        ]);
    }
    
    function layer1$(groupName) {
        return $('<div/>', {'class': groupName + ' layer1 slot picker'}).append(
                option$('spot', groupName, 'checked'),
                $.map(Array.from(new Array(2).keys()), function(n) {
                    return option$('t' + n, groupName);
                }),
                $.map(Array.from(new Array(2).keys()), function(n) {
                    return option$('h' + n, groupName);
                }),
                $('<br/>'),
                $.map(Array.from(new Array(7).keys()), function(n) {
                    return option$('d' + n, groupName);
                }),
                $('<br/>'),
                $.map(Array.from(new Array(9).keys()), function(n) {
                    return option$('w' + n, groupName);
                })
            );
    }
    
    function playground$(id) {
        return $('<div id="' + id + '" />').append($.map(Array.from(new Array(20).keys()), function(n) {
            return layer1$(id + 'slot' + (n + 1));
        }));
    }
    
    $('#slots').replaceWith(
        $.map(Array.from(new Array(7).keys()), function(n) {
            return playground$('playground' + n);
        })
    );
    
    function inflateBus(board, blueprint) {
        var a = blueprint.split(' ');
        $(board + ' .slot').map(function(n, i) {
            $(':input', i).val([a[n]]);
        });
    }
    
    inflateBus('#playground0', 't0 d4 w2 w2 d4 w2 w2 d4 h0');
    inflateBus('#playground1', 't0 w4 d0 w7 w7 w7 w7 d0 h0');
    inflateBus('#playground2', 't0 w4 w4 w8 w8 w8 w8 d0 h0');
    inflateBus('#playground3', 't0 w6 d0 w8 w8 w2 d0 h0');
    inflateBus('#playground4', 't0 w4 d0 w8 w8 w8 w8 d0 h0');
    inflateBus('#playground5', 't0 d5 w2 w2 d5 t1 w2 w2 d5 w2 w2 d5 h0');
    inflateBus('#playground6', 't0 w6 d6 w2 w2 d6 w0 w2 w6 d6 h0');
});
</script>
</head>
<body>
    <span id='slots'></span>
</body>
</html>